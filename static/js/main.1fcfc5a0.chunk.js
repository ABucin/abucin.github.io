(this["webpackJsonpcovid-dashboard"]=this["webpackJsonpcovid-dashboard"]||[]).push([[0],{179:function(e,t,a){},298:function(e,t,a){e.exports=a(446)},303:function(e,t,a){},305:function(e,t,a){},446:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(50),i=a.n(o),s=(a(303),a(19)),c=a.n(s),l=a(113),u=a(258),d=a(18),h=a(14),p=a(114),f=a(122),m=a(123),v=(a(305),a(72)),y=a.n(v),w=(a(179),a(234)),D=a(245),g=a(247),C=a(250),k=a.n(C),b=a(255),x=a.n(b),E=a(256),T=a.n(E),O="#ff7f7f",M=window.innerWidth<750,j=function(e,t){return e>0?t?"#009090":O:e<0?t?O:"#009090":"#efdea4"},R=M?{fontSize:M?14:12,display:"flex",alignItems:"center",justifyContent:"center"}:{margin:5};var S=function(e){var t=e.currentCount-e.previousCount||0,a=Math.trunc(100*t/e.previousCount*10)/10||0,r=t>0?"+":"";return n.a.createElement("span",{className:"status",style:R},e.text,": ",e.currentCount," (",n.a.createElement("span",{style:{color:j(t,e.reverse)}},r,t," / ",r,a,"%"),")",function(e,t){return e>0?n.a.createElement(k.a,{htmlColor:t?"#009090":O}):e<0?n.a.createElement(x.a,{htmlColor:t?O:"#009090"}):n.a.createElement(T.a,{htmlColor:"#efdea4"})}(t,e.reverse))},W=a(491),F={axis:{ticks:{line:{stroke:"#c5c5c5"},text:{fill:"#c5c5c5",fontFamily:"Oswald"}}},labels:{text:{fontFamily:"Oswald",fontWeight:400}},legends:{text:{textShadow:"1px 1px 1px #111",fontFamily:"Oswald"}},grid:{line:{stroke:"#c5c5c5",strokeWidth:1,strokeDasharray:"5 5"}},tooltip:{container:{background:"#333",border:"1px solid ".concat("#c5c5c5"),fontSize:12,textShadow:"1px 1px 1px #111"}}},Z=a(40),B=a.n(Z),Y=window.innerWidth<750,A=Y?"horizontal":"vertical",V=Y?window.innerWidth:void 0,z=Y?800:600,L=Y?{top:20,right:10,bottom:30,left:40}:{top:0,right:30,bottom:80,left:60},X=function(e){return y()(e).format("DD MMM")},G=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{axis:Y?"y":"x",value:e,lineStyle:{stroke:t,strokeWidth:1,strokeDasharray:r},legend:a,textStyle:{fill:"#c5c5c5",fontSize:12,textShadow:"1px 1px 1px #111"}}},N=function(e){return n.a.createElement("div",null,n.a.createElement("p",null,X(e.data.Date)),n.a.createElement("p",{style:{color:"#efdea4"}},"Active: ",e.data.Active),n.a.createElement("p",{style:{color:"#ff7f7f"}},"Deaths: ",e.data.Deaths),n.a.createElement("p",{style:{color:"#35a8a8"}},"Recovered: ",e.data.Recovered))},H=function(e){return["Confirmed","Active"].includes(e.data.id)?"black":"white"},I=Y?{tickValues:5}:{tickRotation:45,format:X},J=Y?{tickRotation:45,format:X}:{tickValues:5},$=([{id:"total",label:"Total"},{id:"growth",label:"Growth"}].map((function(e,t){return n.a.createElement(W.a,{key:t,value:e.id},e.label)})),function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"renderChart",value:function(){var e=B()(this.props.barData),t=B()(this.props.lineData),a=B()(this.props.calendarData),r=(g.a,a[0]?a[0].day:new Date,n.a.createElement(w.a,{data:e,keys:["Deaths","Recovered","Active"],colors:["#ff7f7f","#35a8a8","#efdea4"],indexBy:"Date",layout:A,labelSkipHeight:Y?void 0:10,labelSkipWidth:Y?20:void 0,padding:Y?.15:.1,enableGridX:Y,enableGridY:!Y,margin:L,theme:F,axisBottom:I,gridYValues:Y?void 0:5,gridXValues:Y?5:void 0,axisLeft:J,axisTop:Y?{tickValues:5}:void 0,labelTextColor:H,markers:[G(Y?"2020-03-03T00:00:00Z":"2020-03-04T00:00:00Z","#35a8a8","First recoveries"),G(Y?"2020-03-15T00:00:00Z":"2020-03-16T00:00:00Z","#efdea4","Emergency state"),G(Y?"2020-03-21T00:00:00Z":"2020-03-22T00:00:00Z","#ff7f7f","First deaths"),G(Y?"2020-03-24T00:00:00Z":"2020-03-25T00:00:00Z","#efdea4","Full lockdown"),G(Y?"2020-03-29T00:00:00Z":"2020-03-30T00:00:00Z","#efdea4","Emergency state (+2w)","1 1"),G(Y?"2020-04-07T00:00:00Z":"2020-04-08T00:00:00Z","#efdea4","Full lockdown (+2w)","1 1")],tooltip:N,legends:[{itemTextColor:"#c5c5c5",dataFrom:"keys",anchor:"bottom",direction:"row",translateX:0,translateY:70,itemsSpacing:0,itemWidth:80,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:10,effects:[{on:"hover",style:{itemOpacity:1}}]}]})),o=n.a.createElement(D.a,{data:t,colors:["#efdea4","#35a8a8","#ff7f7f"],enableGridX:Y,enableGridY:!Y,gridYValues:Y?void 0:5,gridXValues:Y?5:void 0,margin:L,theme:F,curve:"monotoneX",axisBottom:Y?void 0:{tickRotation:45},axisLeft:Y?{tickRotation:45}:void 0,pointSize:Y?6:8,pointColor:"#333",pointBorderWidth:2,pointBorderColor:function(e){return e.serieColor},markers:[G(Y?"03 Mar":"04 Mar","#35a8a8","First recoveries"),G(Y?"15 Mar":"16 Mar","#efdea4","Emergency state"),G(Y?"21 Mar":"22 Mar","#ff7f7f","First deaths"),G(Y?"24 Mar":"25 Mar","#efdea4","Full lockdown"),G(Y?"29 Mar":"30 Mar","#efdea4","Emergency state (+2w)","1 1"),G(Y?"07 Apr":"08 Apr","#efdea4","Full lockdown (+2w)","1 1")],legends:[{itemTextColor:"#c5c5c5",anchor:"bottom",direction:"row",translateX:0,translateY:70,itemsSpacing:0,itemWidth:80,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:10,effects:[{on:"hover",style:{itemOpacity:1}}]}]}),i="total"===this.props.type;return n.a.createElement("div",{className:"chart",style:{height:z,width:V}},i?r:o)}},{key:"render",value:function(){this.props.type;return n.a.createElement("div",null,n.a.createElement("h3",null,"2020 Romanian COVID-19 cases"),n.a.createElement("div",{style:{margin:5}},n.a.createElement(S,{text:"Latest confirmed",currentCount:this.props.current.Confirmed,previousCount:this.props.previous.Confirmed}),n.a.createElement(S,{text:"Latest deaths",currentCount:this.props.current.Deaths,previousCount:this.props.previous.Deaths}),n.a.createElement(S,{reverse:!0,text:"Latest recovered",currentCount:this.props.current.Recovered,previousCount:this.props.previous.Recovered})),this.renderChart())}}]),a}(n.a.Component)),q=a(490),K=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,null,[{key:"getData",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,a,r,n,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.covid19api.com/country/romania/status/confirmed/live");case 2:return t=e.sent,e.next=5,fetch("https://api.covid19api.com/country/romania/status/recovered/live");case 5:return a=e.sent,e.next=8,fetch("https://api.covid19api.com/country/romania/status/deaths/live");case 8:return r=e.sent,e.next=11,t.json();case 11:return n=e.sent,e.next=14,a.json();case 14:return o=e.sent,e.next=17,r.json();case 17:return i=e.sent,30,e.abrupt("return",{rawConfirmed:n.slice(-30),rawRecovered:o.slice(-30),rawDeaths:i.slice(-30)});case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),P=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,null,[{key:"parseData",value:function(e){var t=e.rawConfirmed,a=e.rawRecovered,r=e.rawDeaths;return e.isTotal?this.parseBarData({rawConfirmed:t,rawRecovered:a,rawDeaths:r}):this.parseLineData({rawConfirmed:t,rawRecovered:a,rawDeaths:r})}},{key:"parseBarData",value:function(e){var t=e.rawConfirmed,a=e.rawRecovered,r=e.rawDeaths,n=t.map((function(e,n){var o=B()(e);return o.Confirmed=t[n].Cases,o.Recovered=a[n].Cases,o.Deaths=r[n].Cases,o.Active=t[n].Cases-a[n].Cases-r[n].Cases,o}));return{barData:n,current:B()(n[n.length-1]),previous:B()(n[n.length-2])}}},{key:"parseCalendarData",value:function(e){var t=e.rawConfirmed;e.rawRecovered,e.rawDeaths;return{calendarData:t.map((function(e,a){return{day:y()(e.Date).format("YYYY-MM-DD"),value:a>0?t[a].Cases-t[a-1].Cases:t[a].Cases}})),current:0,previous:0}}},{key:"parseLineData",value:function(e){var t=e.rawConfirmed,a=e.rawRecovered,r=e.rawDeaths,n=[{id:"confirmed",data:t.map(this.mapper)},{id:"recovered",data:a.map(this.mapper)},{id:"deaths",data:r.map(this.mapper)}];return{lineData:n,current:B()(n[n.length-1]),previous:B()(n[n.length-2])}}},{key:"mapper",value:function(e){var t=window.innerWidth<750;return{x:t?e.Cases:y()(e.Date).format("DD MMM"),y:t?y()(e.Date).format("DD MMM"):e.Cases}}}]),e}(),Q=a(257),U=Object(Q.a)({palette:{primary:{dark:"#efdea4",light:"#efdea4",main:"#efdea4"},type:"dark",text:{primary:"#c5c5c5"},background:{}},typography:{fontFamily:["Oswald"].join(",")}}),_=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={barData:[],lineData:[],calendarData:[],current:{},previous:{},rawConfirmed:[],rawRecovered:[],rawDeaths:[],chartType:"total"},r.onTypeChange=r.onTypeChange.bind(Object(p.a)(r)),r}return Object(h.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log(e)}},{key:"componentWillMount",value:function(){this.getData()}},{key:"parseData",value:function(){var e="total"===this.state.chartType,t=P.parseData({rawConfirmed:this.state.rawConfirmed,rawRecovered:this.state.rawRecovered,rawDeaths:this.state.rawDeaths,isTotal:e});this.setState(Object(u.a)({},t))}},{key:"onTypeChange",value:function(e){this.setState({chartType:e.target.value}),this.getData()}},{key:"getData",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getData();case 2:t=e.sent,this.setState(t),this.parseData();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(q.a,{theme:U},n.a.createElement("div",{className:"App"},n.a.createElement($,{barData:this.state.barData,lineData:this.state.lineData,calendarData:this.state.calendarData,current:this.state.current,previous:this.state.previous,onTypeChange:this.onTypeChange,type:this.state.chartType}),n.a.createElement("div",{className:"footer"},"By Andrei Bucin")))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[298,1,2]]]);
//# sourceMappingURL=main.1fcfc5a0.chunk.js.map